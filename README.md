# TOPAZ - ëª¨ë°”ì¼ë¡œ ê²½í—˜í•˜ëŠ” ì„¸ê³„ì—¬í–‰ <img src="https://github.com/user-attachments/assets/7706edaa-1da4-45ad-8d38-7c7b90267400" width="30" height="30">
> Trip On Smart Phone A-Z, TOPAZ
<br>
<br>

<div align="center">
  <img src="https://github.com/seosieve/TopazIOS/assets/76729543/bf153ad9-ba4b-4dcd-a13a-1c64eacbb960" width="150" height="150">
  <br>
  <br>
  <img src="https://img.shields.io/badge/Swift-v5.0-red?logo=swift"/>
  <img src="https://img.shields.io/badge/Xcode-v15.0-blue?logo=Xcode"/>
  <img src="https://img.shields.io/badge/iOS-14.0+-black?logo=apple"/>  
  <br>
  <br>
  <a href="https://apps.apple.com/kr/app/topaz/id1589188867" style="display: inline-block; overflow: hidden; border-radius: 13px; width: 180px; height: 83px;"><img src="https://tools.applemediaservices.com/api/badges/download-on-the-app-store/black/en-US?size=250x83&amp" alt="Download on the App Store" style="border-radius: 13px; width: 180px; height: 83px;"></a>
</div>

<div align="center">
  <br>
  <img src="https://github.com/seosieve/TopazIOS/assets/76729543/2741e194-9176-498b-b3df-aaebfa8ab5fb" width="19%"> <img src="https://github.com/seosieve/TopazIOS/assets/76729543/47a43577-9195-419f-8955-19cbbc9e3976" width="19%"> <img src="https://github.com/seosieve/TopazIOS/assets/76729543/32af170b-bd75-4403-9088-a6a8738dc86e" width="19%"> <img src="https://github.com/seosieve/TopazIOS/assets/76729543/bb7a0500-e432-448e-a0e9-15453a0a8f5b" width="19%"> <img src="https://github.com/seosieve/TopazIOS/assets/76729543/f7ab2a41-f783-4643-be66-726fe1a31b1e" width="19%">
</div>
<br>

## í”„ë¡œì íŠ¸ ì†Œê°œ
`ğŸŒ ì—¬í–‰ì„ ê°€ê¸°ì—” ì‹œê°„ë„, ìƒí™©ë„ ì•ˆë˜ëŠ” ìš”ì¦˜, ì €í¬ê°€ ìƒìƒí•œ ì—¬í–‰ê²½í—˜ì„ í†µí•´ ì—¬í–‰ì˜ ì¦ê±°ì›€ì„ ë‹¤ì‹œ ëŠë¼ê²Œ í•´ë“œë¦´ê²Œìš”!`
> **ë‚˜ë§Œì˜ ì»¤ìŠ¤í…€ ë°°ê²½ ìŒì•…ê³¼ í•¨ê»˜ ì—¬í–‰ ê²½í—˜ì„ ê³µìœ **í•  ìˆ˜ ìˆëŠ” ì•± ì„œë¹„ìŠ¤
<br>

## í”„ë¡œì íŠ¸ ì£¼ìš” ê¸°ëŠ¥
- ì´ë©”ì¼ íšŒì›ê°€ì…, ë¡œê·¸ì¸ ê¸°ëŠ¥
- ì‹œê°„ëŒ€ì— ë”°ë¼ ë‹¤ë¥¸ í…Œë§ˆì˜ **ì¸í„°ë ‰í‹°ë¸Œ ì§€êµ¬** í™ˆí™”ë©´
- ëŒ€ë¥™ì— ë”°ë¥¸ ì—¬í–‰ì§€ ì¶”ì²œ, ê²€ìƒ‰ ê¸°ëŠ¥
- ì»¤ë®¤ë‹ˆí‹° ê²Œì‹œê¸€ **ì‘ì„± / ìˆ˜ì • / ì‚­ì œ / ê²€ìƒ‰**
- ê²Œì‹œê¸€ê³¼ í•¨ê»˜ ì‘ì„±í•  ìˆ˜ ìˆëŠ” **ì»¤ìŠ¤í…€ ë°°ê²½ìŒì•…** ê¸°ëŠ¥
- **ë‚´ê°€ ì“´ ê¸€, í”„ë¡œí•„, ì°¨ë‹¨ìœ ì €, ì—¬í–‰ë“±ê¸‰, ìˆ˜ì§‘í’ˆ** ê´€ë¦¬ ê¸°ëŠ¥
<br>

## í”„ë¡œì íŠ¸ ê°œë°œ í™˜ê²½
- ê°œë°œ ì¸ì›
  - ë””ìì´ë„ˆ 2ëª…, iOSê°œë°œ 1ëª…
- ê°œë°œ ê¸°ê°„
  - 2022.09 - 2022.12 (3ê°œì›”)
- iOS ìµœì†Œ ë²„ì „
  - iOS 14.0+
<br>

## í”„ë¡œì íŠ¸ ê¸°ìˆ  ìŠ¤íƒ
- **í™œìš©ê¸°ìˆ  ë° í‚¤ì›Œë“œ**
  - **iOS** : swift 5.8, xcode 15.0.1, UIKit, SceneKit
  - **Network** : URLSession, Firebase
  - **UI** : StoryBoard

- **ë¼ì´ë¸ŒëŸ¬ë¦¬**

ë¼ì´ë¸ŒëŸ¬ë¦¬ | ì‚¬ìš© ëª©ì  | Version
:---------:|:----------:|:---------:
SwiftySound | ë°°ê²½ìŒì•… ì²˜ë¦¬ | -
Kingfisher | ì´ë¯¸ì§€ ì²˜ë¦¬ | 7.0
lottie-ios | ìŠ¤í”Œë˜ì‹œ, ë¡œë”© ì¸ë””ì¼€ì´í„° | -
<br>

## í”„ë¡œì íŠ¸ ì•„í‚¤í…ì²˜
<div align="center">
  <img src="https://github.com/user-attachments/assets/a9c0ae36-70e4-4fbf-a753-4b2bce2170dc">
</div>
<br>

> StoryBoard + MVVM Architecture
- 3D Base UIë“± Custom UIê°€ ë§ì•„ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ê³¼ ì „ì²´ì ì¸ UI Flowê´€ì°°ì„ ìœ„í•´ StoryBoard í™œìš©
- Managerê°ì²´ì—ì„œ API Fetching ë° FireBase CRUD êµ¬í˜„ ë¡œì§ì„ ë‹´ë‹¹, ViewModelì—ì„œ í˜¸ì¶œ
- Auth Token ì €ì¥ ë° UserID ë“± ë¶ˆí•„ìš”í•œ API Callì„ ì¤„ì´ê¸° ìœ„í•´ UserDefaults ì €ì¥ì†Œ ë³‘ìš©
<br>

## íŠ¸ëŸ¬ë¸” ìŠˆíŒ…
### 1. SceneViewì—ì„œ ì‚¬ìš©ì Interactionì´ ì‘ë™í•˜ì§€ ì•ŠëŠ” ë¬¸ì œ
> 3Dì¬ì§ˆ ë§µí•‘ì„ SCNê°ì²´ ì „ì²´ì— í•˜ë‹¤ë³´ë‹ˆ ë‚˜ëˆ ì ¸ìˆë˜ ê°ì²´ ëª¨ë“ˆë“¤ì„ ì¸ì‹í•˜ì§€ ëª»í•˜ëŠ” ë¬¸ì œ ë°œìƒ
<div align="center">
  <img src="https://github.com/user-attachments/assets/18bb0b75-a054-4d20-8b31-33c37716679e" width="75%"> <img src="https://github.com/seosieve/TopazIOS/assets/76729543/7805f425-dc4b-4982-adad-e003bac1d819" width="11.8%"> <img src="https://github.com/seosieve/TopazIOS/assets/76729543/17986f98-59c3-4ff6-9216-df4dea40c17b" width="11.8%"> 
</div>
<br>

- Interactionì„ ë‹´ë‹¹í•˜ëŠ” SCNíŒŒì¼ê³¼ UIë¥¼ ë‹´ë‹¹í•˜ëŠ” SCNíŒŒì¼ì„ ë‚˜ëˆ ì„œ SCNSceneì„ ê°ê° ì œì‘
- hitTestí•¨ìˆ˜ë¥¼ í†µí•´ SCNViewì˜ Geometry Nameì— ì ‘ê·¼, ê°ê°ì˜ Enumê°’ê³¼ ê²°ê³¼ ë§µí•‘
```swift
class EarthNode: SCNNode {
    override init() {
        super.init()
        //Interaction SCNScene
        let earthBound = SCNScene(named: "Assets.scnassets/earth_isolate.scn")!
        let earthBoundArr = earthBound.rootNode.childNodes
        earthBoundArr.forEach { childNode in
            self.addChildNode(childNode as SCNNode)
        }
        //UI SCNScene
        let earth = SCNScene(named: "Assets.scnassets/Earth.scn")!
        let earthArr = earth.rootNode.childNodes
        earthArr.forEach { childNode in
            self.addChildNode(childNode as SCNNode)
        }
    }
    
    required init?(coder aDecoder: NSCoder) {
        super.init(coder: aDecoder)
    }
}
```
```swift
let point = gestureRecognize.location(in: sceneView)
let hitResults = sceneView.hitTest(point, options: [:])
if hitResults.count > 0 {
    let result = hitResults[0]
    guard let continentTitle = result.node.geometry?.name else { return }
    if continent.continentName.contains(continentTitle) {
        continentButton.setTitle(continentTitle, for: .normal)
        if let count = continent.continentName.firstIndex(of: continentTitle) {
            continentCount = count
        }
    }
}
```
<br>

### 2. ì‚¬ìš©ìê°€ ì§€ì •í•œ ë°°ê²½ìŒì•…ì„ FireBase ì €ì¥ì†Œì— ì €ì¥
> ì‚¬ìš©ìê°€ ì»¤ìŠ¤í…€í•œ ë°°ê²½ìŒì•…ì„ FireBase Storageì— ì €ì¥í•  ë•Œ, ìŒì•… íŒŒì¼ ìì²´ë¥¼ ì €ì¥í•˜ë©´ ê°™ì€ ìŒì•… íŒŒì¼ì´ ì¤‘ë³µë˜ì–´ ì €ì¥ë˜ëŠ” ìƒí™©ì´ ë°œìƒ
<div align="center">
  <img src="https://github.com/user-attachments/assets/1498f478-5e41-4333-8a5e-ae26a6433f2d" width="75%"> <img src="https://github.com/seosieve/TopazIOS/assets/76729543/f7ab2a41-f783-4643-be66-726fe1a31b1e" width="11.8%"> <img src="https://github.com/seosieve/TopazIOS/assets/76729543/97311dfb-fce7-4eaf-ba5a-ccc064526551" width="11.8%"> 
</div>
<br>

- mp3íŒŒì¼ì´ ì•„ë‹Œ 'ì„ íƒëœ ìŒì•… ì´ë¦„'ê³¼ 'ì‚¬ìš´ë“œ ê°’'ë¥¼ Stringê³¼ Int ë°°ì—´ë¡œ ì €ì¥í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì ‘ê·¼
- í˜„ì¬ ì¬ìƒë˜ê³ ìˆëŠ” ìŒì•…ì˜ ì‚¬ìš´ë“œ ê°’ì„ Volumeì´ë¼ëŠ” ì¸ìŠ¤í„´ìŠ¤ë¡œ ì œê³µí•´ì£¼ëŠ” **SwiftySound** í”„ë ˆì„ì›Œí¬ ë°œê²¬, ì‚¬ìš©
- ì‚¬ìš©ìì˜ PanGestureì˜ pointê°’ê³¼ volumeì„ ì—°ë™ì‹œí‚¤ê³ , ì´ë¥¼ ë°°ì—´ë¡œ ì €ì¥í•´ì„œ FireBaseì— ì €ì¥
```swift
var soundEffectArr = [Sound?]()
var musicNameArr = Array(repeating: "", count: 4)

func playBackgroundMusic(fileName: String, isFirst: Bool = false) {
    DispatchQueue.global().async {
        let url = Bundle.main.url(forResource: fileName, withExtension: "mp3")!
        self.backgroundMusic = Sound(url: url)
        self.backgroundMusic!.play(numberOfLoops: -1)
        let volume = isFirst ? self.musicVolumeArr[0] : 0.5
        self.backgroundMusic?.volume = volume
    }
}

@objc func drag(sender: UIPanGestureRecognizer) {
    //ë“œë˜ê·¸ í–ˆì„ ë•Œì˜ ìœ„ì¹˜
    let translation = sender.translation(in: self.view)
    let x = sender.view!.center.x
    sender.setTranslation(.zero, in: self.view)
    //ë¶€ê°€ìš”ì†Œë“¤ ë˜í•œ ê°™ì´ ì›€ì§ì´ê²Œ ì„¤ì •
    let index = sender.view!.tag
    progressBarProgress[index-1].constraints.forEach { constraint in
        if constraint.firstAttribute == .height {
            constraint.constant = 1.1 * (180 - sender.view!.center.y)
        }
    }
    //ì†Œìˆ˜ì ê°’ì— ë”°ë¼ Sound volume ì¡°ì ˆ
    let volumeFloat = Float(0.009 * (170 - sender.view!.center.y))
    if index == 1 {
        backgroundMusic?.volume = volumeFloat
    } else {
        if sender.view?.subviews.first?.alpha != 0 {
            soundEffectArr[index-2]?.volume = volumeFloat
        }
    }
}
```
### ë©”ëª¨ë¦¬ì  ì´ì 
- ë³€ê²½ í›„, ê²Œì‹œê¸€ í•˜ë‚˜ë‹¹ í‰ê·  ìš©ëŸ‰ 4.05MBì—ì„œ 1.87MBë¡œ ê°ì†Œ
- Storage ì „ì²´ ìš©ëŸ‰ë„ 398MBì—ì„œ 121MBë¡œ ê°ì†Œ
<div align="center">
  <img src="https://github.com/user-attachments/assets/68184718-48f5-44ee-859a-c99d5db8c1c3">
</div>
<br>

### 3. Unsplash API ë©”ëª¨ë¦¬ & ë””ìŠ¤í¬ ìºì‹±
> ê° ë‚˜ë¼ë³„ë¡œ API Callì„ í•˜ë‹¤ë³´ë‹ˆ API í•œë„ê°€ ë„ˆë¬´ ë¹¨ë¦¬ ì†Œëª¨ë˜ëŠ” ìƒí™©ì´ ë°œìƒ
<div align="center">
  <img src="https://github.com/user-attachments/assets/314565b1-6dd5-4bdc-b86b-40840277d4bb" width="75%"> <img src="https://github.com/seosieve/TopazIOS/assets/76729543/32af170b-bd75-4403-9088-a6a8738dc86e" width="11.8%"> <img src="https://github.com/seosieve/TopazIOS/assets/76729543/47a43577-9195-419f-8955-19cbbc9e3976" width="11.8%"> 
</div>
<br>

- NSCacheë¥¼ ì´ìš©í•œ ë©”ëª¨ë¦¬ ìºì‹±ê³¼ FileManagerì„ ì´ìš©í•œ ë””ìŠ¤í¬ ìºì‹±ì„ í•¨ê»˜ ì‚¬ìš©
- FileManager ì €ì¥ ì‹œ, 1ì‹œê°„ ë‹¨ìœ„ì˜ ë§Œë£Œ ê¸°ê°„ì„ UserDefaultsì— í•¨ê»˜ ì €ì¥, API Call ì´ˆê¸°í™” ì£¼ê¸°ì™€ Sync
- UIImage ë¦¬ì‚¬ì´ì§•ì„ í†µí•´ íŒŒì¼ì‹œìŠ¤í…œ ìš©ëŸ‰ì˜ ê³¼ì¤‘í™” ë˜í•œ ë°©ì§€
```swift
func getImage(urlString: String, fileName: String, completion: @escaping (UIImage) -> Void) {
    //Memory Caching
    if let cachedImage = getMemoryImage(fileName: fileName) {
        completion(cachedImage)
        return
    }
    //Disk Caching
    if let diskImage = getDiskImage(fileName: fileName) {
        //Set Memory Cache
        cache.setObject(diskImage, forKey: fileName as NSString)
        completion(diskImage)
        return
    }
    
    guard let url = URL(string: urlString) else { return }
    let urlRequest = URLRequest(url: url)
    
    URLSession.shared.dataTask(with: urlRequest) { [weak self] (data, response, error) in
        if let error = error {
            print(error)
        } else if let response = response as? HTTPURLResponse, let data = data {
            print("Status Code: \(response.statusCode)")
            guard let image = UIImage(data: data) else { return }
            //Set Memory Cache
            self?.cache.setObject(image, forKey: fileName as NSString)
            //Set Disk Cache
            self?.repository.addImage(image: image, fileName: fileName)
            DispatchQueue.main.async {
                completion(image)
            }
        }
    }.resume()
}
```
### ë¹„ìš©ì , ì‚¬ìš©ìì  ì´ì 
- ë³€ê²½ í›„, ê²Œì‹œê¸€ í•˜ë‚˜ë‹¹ í‰ê·  ìš©ëŸ‰ 4.05MBì—ì„œ 1.87MBë¡œ ê°ì†Œ















